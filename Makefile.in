exe_file = dochttx
h_files = $(wildcard *.h)
c_files = $(wildcard *.c)
o_files = $(c_files:%.c=%.o)

CC = @CC@
CFLAGS = @CFLAGS@ @ZVBI_CFLAGS@
CFLAGS += -W -Wall
LDFLAGS = @LDFLAGS@
LDLIBS = @LIBS@ @CURSES_LIB@ @ZVBI_LIBS@
CPPFLAGS = @CPPFLAGS@

.PHONY: all
all: $(exe_file)

.PHONY: clean
clean:
	$(RM) *.o $(exe_file) core core.* *~ Makefile.dep

.PHONY: distclean
distclean: clean
	rm -f config.log config.status config.h

$(o_files): %.o: %.c
	$(CC) $(CFLAGS) -c $(<) -o $(@)

$(exe_file): $(o_files)
	$(CC) $(CFLAGS) $(LDFLAGS) $(^) $(LDLIBS) -o $(@)

Makefile.dep: $(c_files) $(h_files)
	$(CC) $(CFLAGS) -MM $(c_files) > $(@)

-include Makefile.dep

# vim:ts=4
