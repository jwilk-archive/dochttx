exe_file = dochttx
h_files = $(wildcard *.h)
c_files = $(wildcard *.c)
o_files = $(c_files:%.c=%.o)

CC = @CC@
CFLAGS = @CFLAGS@ @ZVBI_CFLAGS@
CFLAGS += -Wall -Wextra
CPPFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@
LDLIBS = @LIBS@ @CURSES_LIB@ @ZVBI_LIBS@
CPPFLAGS = @CPPFLAGS@

.PHONY: all
all: $(exe_file)

.PHONY: clean
clean:
	rm -f *.o $(exe_file) Makefile.dep

.PHONY: distclean
distclean: clean
	rm -f config.log config.status config.h

$(exe_file): $(o_files)
	$(CC) $(CFLAGS) $(LDFLAGS) $(^) $(LDLIBS) -o $(@)

Makefile.dep: $(c_files) $(h_files)
	$(CC) $(CFLAGS) $(CPPFLAGS) -MM $(c_files) > $(@)

-include Makefile.dep

# vim:ts=4
